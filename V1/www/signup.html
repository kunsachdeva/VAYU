<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=no">
    <style>
        @-ms-viewport {
            width: 100vw;
            min-zoom: 100%;
            zoom: 100%;
        }

        @viewport {
            width: 100vw;
            min-zoom: 100% zoom: 100%;
        }

        @-ms-viewport {
            user-zoom: fixed;
            min-zoom: 100%;
        }

        @viewport {
            user-zoom: fixed;
            min-zoom: 100%;
        }
    </style>
    <!-- <script src="cordova.js"></script> -->          <!-- phantom library, needed for Cordova api calls, added during build -->
    <script src="js/app.js"></script>
    <script src="xdk/init-dev.js"></script>
    <title></title>
    <link href="css/font.css" rel="stylesheet">
    <link href="css/materialize.min.css" rel="stylesheet" />
    <script src="js/jq.js"></script>
    <script src="js/materialize.min.js"></script>
    <script>
        $(document).ready(function () {
            var x = localStorage.getItem("user"); 
            if (x != undefined) { window.location.href = "main.html"; }
            var user;
            $("label").click(function () { $("#" + $(this).attr("for")).focus(); });
            $("#signupBtn").click(function () {
                $("#loader2").css("display", "block");
                $("#loginForm2").css("display", "none");
                var e = $.trim($("#email_").val());
                var p = $.trim($("#pass_").val());
                var l = $.trim($("#lname_").val());
                var f = $.trim($("#fname_").val());
                if (e != null && p != null && l != null && f != null && e != "" && p != "" && f != "" && l != "" && !($("#email_").hasClass("invalid"))) {
                    $.post("http://vayu-api.herokuapp.com/user", { name: { first: f, last: l }, email: e, password: p })
            .done(function (data1) {
                var p = $.trim($("#pass_").val());
                $.ajax({
                    url: "http://vayu-api.herokuapp.com/user",
                    method: "GET",
                    contentType: "application/json",
                    headers: { "Authorization": "Basic " + btoa(e + ":" + p) }
                }).done(function (data1) {
                    user = data1;
                    localStorage.setItem("user", JSON.stringify(user));
                    window.location.href = "index.html";
                }).fail(function () {
                    $("#loader2").css("display", "none");
                    $("#loginForm2").css("display", "block");
                    Materialize.toast('Sign Up failed!', 4000);
                });
            }).fail(function () {
                $("#loader2").css("display", "none");
                $("#loginForm2").css("display", "block");
                Materialize.toast('Sign Up failed!', 4000);
            });
                }
                else Materialize.toast('Sign Up failed!', 4000);
            });
        });
    </script>
</head>
<body>
    <div style="text-align:center;margin-top:60px;margin-bottom:50px;"> <img src="img/logo1.png" id="logo" style="width:90%;max-width:400px" /></div>
    <div class="row">
        <form class="col s12">
            <div class="row">
                <div id="loader2" style="text-align:center;margin-top:81px;display:none">
                    <div class="preloader-wrapper big active">
                        <div class="spinner-layer spinner-blue">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                        <div class="spinner-layer spinner-red">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>

                        <div class="spinner-layer spinner-yellow">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>

                        <div class="spinner-layer spinner-green">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="loginForm2">
                    <div class="input-field col s12">
                        <input id="fname_" type="text">
                        <label for="fname_">First Name</label>
                    </div>
                    <div class="input-field col s12">
                        <input id="lname_" type="text">
                        <label for="lname_">Last Name</label>
                    </div>
                    <div class="input-field col s12">
                        <input id="email_" type="email" class="validate">
                        <label for="email_">Email</label>
                    </div>
                    <div class="input-field col s12">
                        <input id="pass_" type="password">
                        <label for="pass_">Password</label>
                    </div>
                    <!--<div class="input-field col s12">
                        <input type="checkbox" id="TnC" />
                        <label for="TnC">I agree with the terms and conditions.</label>
                    </div>-->
                    <div class="input-field col s12 centered" style="text-align:center;margin-top:30px">
                        <a id="signupBtn" class="waves-effect waves-light btn" style="background-color:orangered">Get me in</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</body>
</html>